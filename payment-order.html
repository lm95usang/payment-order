<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내부 테스트용 결제 주문서</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="payment-order.css" rel="stylesheet">
</head>
<body>
    <div class="container py-4">
        <!-- Header -->
        <div class="text-center mb-4">
            <h1 class="h3 fw-bold text-primary">
                <i class="bi bi-credit-card me-2"></i>내부 테스트용 결제 주문서
            </h1>
            <p class="text-muted mb-0">Payment Order Test Page</p>
        </div>

        <!-- Tabs -->
        <ul class="nav nav-tabs mb-3" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="order-tab" data-bs-toggle="tab" data-bs-target="#order-pane" type="button">
                    <i class="bi bi-cart3"></i>주문/결제
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="history-tab" data-bs-toggle="tab" data-bs-target="#history-pane" type="button">
                    <i class="bi bi-clock-history"></i>송수신 전문 이력
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Order Tab -->
            <div class="tab-pane fade show active" id="order-pane" role="tabpanel">
                <!-- Common Settings Section -->
                <div class="section-card mb-4">
                    <h2 class="section-title">
                        <i class="bi bi-gear me-2"></i>공통 설정
                    </h2>
                    <div class="section-body">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <label class="form-label small fw-semibold">권역 (Region) <span class="text-danger">*</span></label>
                                <select class="form-select" id="region-select">
                                    <!-- Options will be added dynamically -->
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label small fw-semibold">사업부 코드 <span class="text-danger">*</span></label>
                                <select class="form-select" id="biz-code-select">
                                    <!-- Options will be added dynamically -->
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label small fw-semibold">스토어 <span class="text-danger">*</span></label>
                                <select class="form-select" id="store-select">
                                    <!-- Options will be added dynamically -->
                                </select>
                            </div>
                            <div class="col-md-3">
                                <label class="form-label small fw-semibold">국가 코드 <span class="text-danger">*</span></label>
                                <select class="form-select" id="country-code-select">
                                    <!-- Options will be added dynamically -->
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row g-4 main-layout">
                    <!-- Left Section: Order Info -->
                    <div class="col-lg-7">
                        <div class="section-card h-100">
                            <h2 class="section-title">
                                <i class="bi bi-bag-check me-2"></i>주문 정보
                            </h2>
                            <div class="section-body">
                                <!-- Product Section -->
                                <div class="mb-4">
                                    <h3 class="sub-section-title">
                                        <i class="bi bi-box-seam"></i>상품 목록
                                    </h3>
                                    <div class="product-list list-group" id="product-list">
                                        <!-- Products will be added here -->
                                    </div>
                                    <div class="product-form">
                                        <div class="row g-2">
                                            <div class="col-md-2 col-6">
                                                <label class="form-label small text-muted mb-1">상품ID</label>
                                                <input type="text" class="form-control form-control-sm" id="prod-id">
                                            </div>
                                            <div class="col-md-2 col-6">
                                                <label class="form-label small text-muted mb-1">상품명</label>
                                                <input type="text" class="form-control form-control-sm" id="prod-name">
                                            </div>
                                            <div class="col-md-2 col-6">
                                                <label class="form-label small text-muted mb-1">상품금액</label>
                                                <input type="number" class="form-control form-control-sm" id="prod-price">
                                            </div>
                                            <div class="col-md-2 col-6">
                                                <label class="form-label small text-muted mb-1">배송비</label>
                                                <input type="number" class="form-control form-control-sm" id="prod-shipping">
                                            </div>
                                            <div class="col-md-2 col-6">
                                                <label class="form-label small text-muted mb-1">배송그룹번호</label>
                                                <input type="text" class="form-control form-control-sm" id="prod-delivery-group">
                                            </div>
                                            <div class="col-md-2 col-6">
                                                <label class="form-label small text-muted mb-1">셀러번호</label>
                                                <input type="text" class="form-control form-control-sm" id="prod-seller-no">
                                            </div>
                                        </div>
                                        <div class="row g-2 mt-2">
                                            <div class="col-12">
                                                <button class="btn btn-success btn-sm w-100" id="btn-add-product">
                                                    <i class="bi bi-plus-lg me-1"></i>상품 추가
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="total-summary">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <span class="total-label">총 결제금액</span>
                                            <span class="total-amount" id="total-amount">0원</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Customer Section -->
                                <div>
                                    <h3 class="sub-section-title">
                                        <i class="bi bi-person"></i>고객 정보
                                    </h3>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label class="form-label small fw-semibold">userNo <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="customer-userno" placeholder="사용자 번호" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label small fw-semibold">고객명</label>
                                            <input type="text" class="form-control" id="customer-name" placeholder="고객명 입력">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label small fw-semibold">전화번호</label>
                                            <input type="tel" class="form-control" id="customer-phone" placeholder="010-0000-0000">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label small fw-semibold">이메일</label>
                                            <input type="email" class="form-control" id="customer-email" placeholder="email@example.com">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Section: Payment Info -->
                    <div class="col-lg-5">
                        <div class="section-card h-100">
                            <h2 class="section-title">
                                <i class="bi bi-credit-card-2-front me-2"></i>결제 정보
                            </h2>
                            <div class="section-body">
                                <!-- Payment Method -->
                                <div class="mb-4">
                                    <h3 class="sub-section-title">
                                        <i class="bi bi-wallet2"></i>결제 수단
                                    </h3>
                                    <!-- No Store Selected Message -->
                                    <div class="no-store-message text-center py-4" id="no-store-message">
                                        <i class="bi bi-exclamation-circle text-warning fs-3 d-block mb-2"></i>
                                        <p class="text-muted mb-0">스토어를 먼저 선택해주세요.</p>
                                    </div>
                                    <!-- Payment Method Group (Dynamic) -->
                                    <div class="payment-method-group" id="payment-method-container" style="display: none;">
                                        <div class="row g-2" id="payment-method-list">
                                            <!-- Payment methods will be dynamically added here -->
                                        </div>
                                    </div>

                                    <!-- Card Option -->
                                    <div id="card-option" class="payment-option show">
                                        <div class="row g-3">
                                            <div class="col-md-6">
                                                <label class="form-label small fw-semibold">카드사 선택</label>
                                                <select class="form-select" id="card-company">
                                                    <option value="">카드사를 선택하세요</option>
                                                    <option value="SHINHAN">신한카드</option>
                                                    <option value="KB">KB국민카드</option>
                                                    <option value="SAMSUNG">삼성카드</option>
                                                    <option value="HYUNDAI">현대카드</option>
                                                    <option value="LOTTE">롯데카드</option>
                                                    <option value="HANA">하나카드</option>
                                                    <option value="BC">BC카드</option>
                                                    <option value="NH">NH농협카드</option>
                                                    <option value="WOORI">우리카드</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label small fw-semibold">할부개월</label>
                                                <select class="form-select" id="card-installment">
                                                    <option value="0" selected>일시불</option>
                                                    <option value="2">2개월 무이자</option>
                                                    <option value="3">3개월 무이자</option>
                                                    <option value="4">4개월</option>
                                                    <option value="5">5개월</option>
                                                    <option value="6">6개월</option>
                                                    <option value="7">7개월</option>
                                                    <option value="8">8개월</option>
                                                    <option value="9">9개월</option>
                                                    <option value="10">10개월</option>
                                                    <option value="11">11개월</option>
                                                    <option value="12">12개월</option>
                                                </select>
                                            </div>
                                            <div class="col-12">
                                                <label class="form-label small fw-semibold">카드사 포인트 사용</label>
                                                <div class="d-flex gap-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="card-point" value="N" id="card-point-no" checked>
                                                        <label class="form-check-label" for="card-point-no">미사용</label>
                                                    </div>
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="radio" name="card-point" value="Y" id="card-point-yes">
                                                        <label class="form-check-label" for="card-point-yes">사용</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Virtual Account Option -->
                                    <div id="vbank-option" class="payment-option">
                                        <label class="form-label small fw-semibold">은행 선택</label>
                                        <select class="form-select" id="bank">
                                            <option value="">은행을 선택하세요</option>
                                            <option value="SHINHAN">신한은행</option>
                                            <option value="KB">국민은행</option>
                                            <option value="WOORI">우리은행</option>
                                            <option value="HANA">하나은행</option>
                                            <option value="NH">농협은행</option>
                                            <option value="IBK">기업은행</option>
                                            <option value="SC">SC제일은행</option>
                                            <option value="KAKAO">카카오뱅크</option>
                                            <option value="TOSS">토스뱅크</option>
                                        </select>
                                    </div>

                                    <!-- Key-In Option -->
                                    <div id="keyin-option" class="payment-option">
                                        <div class="row g-3">
                                            <div class="col-12">
                                                <label class="form-label small fw-semibold">카드번호</label>
                                                <input type="text" class="form-control" id="keyin-card-number" placeholder="0000-0000-0000-0000" maxlength="19">
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label small fw-semibold">유효월 (MM)</label>
                                                <select class="form-select" id="keyin-exp-month">
                                                    <option value="">월 선택</option>
                                                    <option value="01">01</option>
                                                    <option value="02">02</option>
                                                    <option value="03">03</option>
                                                    <option value="04">04</option>
                                                    <option value="05">05</option>
                                                    <option value="06">06</option>
                                                    <option value="07">07</option>
                                                    <option value="08">08</option>
                                                    <option value="09">09</option>
                                                    <option value="10">10</option>
                                                    <option value="11">11</option>
                                                    <option value="12">12</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label small fw-semibold">유효년도 (YY)</label>
                                                <select class="form-select" id="keyin-exp-year">
                                                    <option value="">년도 선택</option>
                                                    <option value="24">24</option>
                                                    <option value="25">25</option>
                                                    <option value="26">26</option>
                                                    <option value="27">27</option>
                                                    <option value="28">28</option>
                                                    <option value="29">29</option>
                                                    <option value="30">30</option>
                                                    <option value="31">31</option>
                                                    <option value="32">32</option>
                                                    <option value="33">33</option>
                                                    <option value="34">34</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Token Option -->
                                    <div id="token-option" class="payment-option">
                                        <!-- 토큰 관리 버튼 -->
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <span class="fw-semibold small">등록된 토큰</span>
                                            <div>
                                                <button type="button" class="btn btn-outline-primary btn-sm" id="btn-refresh-tokens">
                                                    <i class="bi bi-arrow-clockwise me-1"></i>새로고침
                                                </button>
                                                <button type="button" class="btn btn-primary btn-sm" id="btn-register-token">
                                                    <i class="bi bi-plus-lg me-1"></i>토큰 등록
                                                </button>
                                            </div>
                                        </div>
                                        <!-- 토큰 목록 -->
                                        <div class="token-list-container mb-3">
                                            <div class="token-list" id="token-list">
                                                <!-- 토큰 목록이 여기에 동적으로 추가됨 -->
                                            </div>
                                            <div class="text-center text-muted py-3" id="no-tokens-message">
                                                <i class="bi bi-key fs-4 d-block mb-2"></i>
                                                <small>등록된 토큰이 없습니다.<br>토큰을 등록해주세요.</small>
                                            </div>
                                        </div>
                                        <!-- 토큰 비밀번호 입력 (비밀번호가 설정된 토큰 선택 시 표시) -->
                                        <div class="token-password-section" id="token-password-section" style="display: none;">
                                            <div class="alert alert-info py-2 mb-2">
                                                <i class="bi bi-lock me-1"></i>선택한 토큰에 비밀번호가 설정되어 있습니다.
                                            </div>
                                            <div class="input-group">
                                                <input type="password" class="form-control" id="token-password-input" placeholder="토큰 비밀번호 입력" maxlength="6">
                                                <button type="button" class="btn btn-outline-secondary" id="btn-verify-token-password">
                                                    <i class="bi bi-check-lg"></i> 확인
                                                </button>
                                            </div>
                                            <div class="token-password-status mt-2" id="token-password-status"></div>
                                        </div>
                                    </div>

                                </div>

                                <!-- Save Option -->
                                <div class="save-option">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="save-info" checked>
                                        <label class="form-check-label" for="save-info">
                                            <i class="bi bi-save me-1"></i>결제정보 저장 (다음 방문 시 자동 불러오기)
                                        </label>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="action-buttons">
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-primary btn-lg" id="btn-pay">
                                            <i class="bi bi-credit-card me-2"></i>결제
                                        </button>
                                        <button class="btn btn-success btn-lg" id="btn-deposit-complete" style="display: none;">
                                            <i class="bi bi-check-circle me-2"></i>입금완료
                                        </button>
                                        <div class="row g-2">
                                            <div class="col-6">
                                                <button class="btn btn-danger w-100" id="btn-cancel-all">
                                                    <i class="bi bi-x-circle me-1"></i>전체취소
                                                </button>
                                            </div>
                                            <div class="col-6">
                                                <button class="btn btn-warning w-100" id="btn-cancel-partial">
                                                    <i class="bi bi-dash-circle me-1"></i>부분취소
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- API History Tab -->
            <div class="tab-pane fade" id="history-pane" role="tabpanel">
                <div class="section-card">
                    <h2 class="section-title">
                        <i class="bi bi-clock-history me-2"></i>API 송수신 전문 이력
                    </h2>
                    <div class="section-body">
                        <div class="table-responsive">
                            <table class="table table-hover api-history-table mb-0">
                                <thead>
                                    <tr>
                                        <th style="width: 60px;">No</th>
                                        <th style="width: 100px;">API ID</th>
                                        <th style="width: 100px;">API명</th>
                                        <th style="width: 160px;">시간</th>
                                        <th>요청 전문</th>
                                        <th>응답 전문</th>
                                    </tr>
                                </thead>
                                <tbody id="api-history-body">
                                    <!-- API history will be added here -->
                                </tbody>
                            </table>
                        </div>
                        <div class="text-center text-muted py-5" id="no-history">
                            <i class="bi bi-inbox fs-1 d-block mb-3"></i>
                            <p class="mb-0">송수신 전문 이력이 없습니다.</p>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mt-3 pt-3 border-top" id="history-footer" style="display: none !important;">
                            <small class="text-muted">
                                <i class="bi bi-info-circle me-1"></i>최대 20건까지 저장됩니다.
                            </small>
                            <button class="btn btn-outline-secondary btn-sm" onclick="clearApiHistory()">
                                <i class="bi bi-trash me-1"></i>이력 삭제
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- API Detail Modal -->
    <div class="modal fade" id="api-detail-modal" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-file-earmark-code me-2"></i>API 전문 상세
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label fw-bold">API ID</label>
                            <div class="bg-light p-2 rounded" id="detail-api-id"></div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-bold">API명</label>
                            <div class="bg-light p-2 rounded" id="detail-api-name"></div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-bold">시간</label>
                        <div class="bg-light p-2 rounded" id="detail-timestamp"></div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-bold">요청 전문</label>
                        <div class="json-viewer-wrapper">
                            <button type="button" class="btn-copy" onclick="copyToClipboard('detail-request')" title="복사">
                                <i class="bi bi-clipboard"></i>
                            </button>
                            <div class="json-viewer" id="detail-request"></div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-bold">응답 전문</label>
                        <div class="json-viewer-wrapper">
                            <button type="button" class="btn-copy" onclick="copyToClipboard('detail-response')" title="복사">
                                <i class="bi bi-clipboard"></i>
                            </button>
                            <div class="json-viewer" id="detail-response"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Partial Cancel Modal -->
    <div class="modal fade" id="partial-cancel-modal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-dash-circle me-2"></i>부분취소
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- 취소할 상품 섹션 -->
                    <div class="mb-4">
                        <h6 class="fw-bold mb-3"><i class="bi bi-x-circle text-danger me-2"></i>취소할 상품</h6>
                        <p class="text-muted small mb-2">취소할 상품을 선택하고 취소 금액을 입력해주세요.</p>
                        <div class="list-group" id="cancel-product-list" style="max-height: 300px; overflow-y: auto;">
                            <!-- Cancelable products will be added here -->
                        </div>
                    </div>

                    <!-- 추가할 배송비 상품 섹션 -->
                    <div class="border-top pt-4">
                        <h6 class="fw-bold mb-3"><i class="bi bi-plus-circle text-success me-2"></i>추가할 배송비 상품</h6>
                        <p class="text-muted small mb-2">부분취소 시 추가할 배송비 상품이 있으면 입력해주세요.</p>

                        <!-- 배송비 상품 입력 폼 -->
                        <div class="bg-light p-3 rounded mb-3">
                            <div class="row g-2 align-items-end">
                                <div class="col-md-2">
                                    <label class="form-label small text-muted mb-1">상품ID</label>
                                    <input type="text" class="form-control form-control-sm" id="shipping-prod-id">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small text-muted mb-1">상품명</label>
                                    <input type="text" class="form-control form-control-sm" id="shipping-prod-name">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small text-muted mb-1">배송비</label>
                                    <input type="number" class="form-control form-control-sm" id="shipping-prod-fee">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small text-muted mb-1">배송그룹번호</label>
                                    <input type="text" class="form-control form-control-sm" id="shipping-prod-delivery-group">
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label small text-muted mb-1">셀러번호</label>
                                    <input type="text" class="form-control form-control-sm" id="shipping-prod-seller-no">
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-success btn-sm w-100" id="btn-add-shipping-product">
                                        <i class="bi bi-plus-lg me-1"></i>추가
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 추가된 배송비 상품 목록 -->
                        <div class="list-group" id="shipping-product-list" style="max-height: 200px; overflow-y: auto;">
                            <!-- Added shipping products will be added here -->
                        </div>
                        <div class="text-center text-muted py-3" id="no-shipping-products">
                            <small>추가된 배송비 상품이 없습니다.</small>
                        </div>
                    </div>

                    <!-- 취소 금액 요약 -->
                    <div class="border-top pt-3 mt-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="fw-bold">총 취소 금액</span>
                            <span class="fs-5 fw-bold text-danger" id="total-cancel-amount">0원</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mt-2">
                            <span class="fw-bold">추가 배송비 합계</span>
                            <span class="fs-5 fw-bold text-success" id="total-shipping-amount">0원</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                    <button type="button" class="btn btn-danger" id="btn-confirm-partial-cancel">
                        <i class="bi bi-check-lg me-1"></i>부분취소 실행
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Token Register Modal -->
    <div class="modal fade" id="token-register-modal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-key me-2"></i>토큰 등록
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label fw-semibold">토큰명 <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="new-token-name" placeholder="예: 내 신용카드">
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold">카드번호 <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="new-token-card-number" placeholder="0000-0000-0000-0000" maxlength="19">
                    </div>
                    <div class="row g-3 mb-3">
                        <div class="col-6">
                            <label class="form-label fw-semibold">유효월 <span class="text-danger">*</span></label>
                            <select class="form-select" id="new-token-exp-month">
                                <option value="">월 선택</option>
                                <option value="01">01</option>
                                <option value="02">02</option>
                                <option value="03">03</option>
                                <option value="04">04</option>
                                <option value="05">05</option>
                                <option value="06">06</option>
                                <option value="07">07</option>
                                <option value="08">08</option>
                                <option value="09">09</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </div>
                        <div class="col-6">
                            <label class="form-label fw-semibold">유효년도 <span class="text-danger">*</span></label>
                            <select class="form-select" id="new-token-exp-year">
                                <option value="">년도 선택</option>
                                <option value="24">24</option>
                                <option value="25">25</option>
                                <option value="26">26</option>
                                <option value="27">27</option>
                                <option value="28">28</option>
                                <option value="29">29</option>
                                <option value="30">30</option>
                            </select>
                        </div>
                    </div>
                    <div class="alert alert-secondary py-2">
                        <i class="bi bi-info-circle me-1"></i>
                        <small>토큰 비밀번호는 등록 완료 후 별도로 설정할 수 있습니다.</small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                    <button type="button" class="btn btn-primary" id="btn-confirm-register-token">
                        <i class="bi bi-check-lg me-1"></i>등록
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Token Password Set Modal -->
    <div class="modal fade" id="token-password-modal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-lock me-2"></i>토큰 비밀번호 설정
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label fw-semibold">토큰</label>
                        <div class="form-control bg-light" id="password-token-info">-</div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold">비밀번호 (6자리 숫자) <span class="text-danger">*</span></label>
                        <input type="password" class="form-control" id="set-token-password" placeholder="숫자 6자리" maxlength="6" pattern="[0-9]*" inputmode="numeric">
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold">비밀번호 확인 <span class="text-danger">*</span></label>
                        <input type="password" class="form-control" id="confirm-token-password" placeholder="비밀번호 재입력" maxlength="6" pattern="[0-9]*" inputmode="numeric">
                    </div>
                    <div class="alert alert-warning py-2">
                        <i class="bi bi-exclamation-triangle me-1"></i>
                        <small>비밀번호는 결제 시 본인 확인에 사용됩니다.</small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                    <button type="button" class="btn btn-primary" id="btn-confirm-set-password">
                        <i class="bi bi-check-lg me-1"></i>설정
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Spinner Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <div class="loading-text mt-2" id="loading-text">처리 중...</div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="constants.js"></script>
    <script src="common.js"></script>
    <script src="payment-order.js"></script>
</body>
</html>
